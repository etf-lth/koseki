{% extends "base.html" %}
{% from "macros.html" import status, group %}
{% block title %}List members{% endblock %}
{% block content %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>First name</th>
            <th>Last name</th>
            <th>Mail</th>
            <th>
                <div class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Status <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><div style="display: block; padding: 3px 20px;">Filter:</div></li>
                        <li><div style="display: block; padding: 3px 20px;"><label class="checkbox inline"><input id="member_state_active" class="member_state_filter" type="checkbox" checked> <span class="label label-success">Active</span></label></div></li>
                        <li><div style="display: block; padding: 3px 20px;"><label class="checkbox inline"><input id="member_state_pending" class="member_state_filter" type="checkbox" checked> <span class="label label-warning">Pending</span></label></div></li>
                        <li><div style="display: block; padding: 3px 20px;"><label class="checkbox inline"><input id="member_state_expired" class="member_state_filter" type="checkbox" checked> <span class="label label-important">Expired</span></label></div></li>
                    </ul>
                </div>
            </th>
            <th>Groups</th>
        </tr>
    </thead>
    <tbody id="member_list">
    {% if persons: %}
        {% for item in persons %}
        <tr data-state="{{ item.state }}">
            <td>{{ item.uid }}</td>
            <td><a href="{{ url_for('member_general', uid=item.uid) }}">{{ item.fname }}</a></td>
            <td><a href="{{ url_for('member_general', uid=item.uid) }}">{{ item.lname }}</a></td>
            <td><a href="mailto:{{ item.email }}">{{ item.email }}</a></td>
            <td>{{ status(item.state) }}</td>
            <td>
                {% for grp in item.groups %}
                    {{ group(grp.group.name) }}
                {% endfor %}
            </td>
        </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="6"><i>No members yet!</i></td>
        </tr>
    {% endif %}
    </tbody>
</table>
{% endblock %}
